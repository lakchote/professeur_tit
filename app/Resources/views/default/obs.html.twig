{% extends 'base.html.twig' %}

{% block stylesheet %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('assets/css/obs.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/modalObs.css') }}">
{% endblock %}


{% block content %}
    <div id="flash">

    </div>
    <div class="col-xs-offset-2 col-xs-10 padding-left--none">
        <a href="" id="obs-load-desktop" class="modal-desktop" data-toggle="modal" data-target="#modal-login-desktop">Test</a>
    </div>

    <div class="row">
        <div class="col-md-2">sidebar <br/> {{ pagination.getTotalItemCount }}</div>



            {% if pagination is defined %}
                {% include 'blocks/observation.html.twig' %}
            {% endif %}

        {# display navigation #}
        <div class="navigation">
            {{ knp_pagination_render(pagination) }}
        </div>

    </div>

        </div>


{% endblock %}



{% block javascript %}
    {{ parent() }}
    <script type="text/javascript">
        $(function () {
            $('#obs-load-desktop').click(function () {
                $.ajax({
                    url: "{{ path('modal_add_observation') }}",
                    method: "GET"
                }).done(function (msg) {
                    var titre = '';
                    $('#modal-load-desktop').html(msg);
                    $('#modal-title-desktop').html(titre);
                });
            });
        }());
    </script>

        <script type="text/javascript">


            function initMap() {
                {% for monObservation in pagination %}
                var myOptions = {
                    zoom: 14,
                    center: new google.maps.LatLng({{ monObservation.latitude|number_format(3, '.')  }}, {{ monObservation.longitude|number_format(3, '.')  }}),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map{{ monObservation.id }} = new google.maps.Map(document.getElementById("map{{ monObservation.id }}"), myOptions);
                {% endfor %}
            }
        </script>






    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACO55kGEkd8YeNffAaErhE02wa_UigduQ&libraries=places&callback=initMap" async defer></script>


{% endblock %}